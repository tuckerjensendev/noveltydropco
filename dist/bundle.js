/*! For license information please see bundle.js.LICENSE.txt */
(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t,n,r,o,a,i;function c(){"use strict";c=function(){return n};var t,n={},r=Object.prototype,o=r.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(t){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),c=new T(r||[]);return a(i,"_invoke",{value:_(e,n,c)}),i}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var h="suspendedStart",p="suspendedYield",v="executing",y="completed",g={};function b(){}function E(){}function w(){}var L={};d(L,s,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(A([])));x&&x!==r&&o.call(x,s)&&(L=x);var I=w.prototype=b.prototype=Object.create(L);function B(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function S(t,n){function r(a,i,c,s){var u=m(t[a],t,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==e(d)&&o.call(d,"__await")?n.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):n.resolve(d).then((function(e){l.value=e,c(l)}),(function(e){return r("throw",e,c,s)}))}s(u.arg)}var i;a(this,"_invoke",{value:function(e,t){function o(){return new n((function(n,o){r(e,t,n,o)}))}return i=i?i.then(o,o):o()}})}function _(e,n,r){var o=h;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=O(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=m(e,n,r);if("normal"===u.type){if(o=r.done?y:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function O(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=m(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function A(n){if(n||""===n){var r=n[s];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var a=-1,i=function e(){for(;++a<n.length;)if(o.call(n,a))return e.value=n[a],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(n)+" is not iterable")}return E.prototype=w,a(I,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:E,configurable:!0}),E.displayName=d(w,l,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,d(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},n.awrap=function(e){return{__await:e}},B(S.prototype),d(S.prototype,u,(function(){return this})),n.AsyncIterator=S,n.async=function(e,t,r,o,a){void 0===a&&(a=Promise);var i=new S(f(e,t,r,o),a);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},B(I),d(I,l,"Generator"),d(I,s,(function(){return this})),d(I,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},n}function s(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){s(a,r,o,i,c,"next",e)}function c(e){s(a,r,o,i,c,"throw",e)}i(void 0)}))}}var l=!1,d=!1;function f(){document.getElementById("loadingSpinner").style.display="flex"}function m(){document.getElementById("loadingSpinner").style.display="none"}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,r=document.getElementById("flashMessage");r.textContent=e,r.className="flash-message ".concat(t),r.classList.remove("hidden"),setTimeout((function(){r.classList.add("hidden")}),n)}function p(e){var t=document.getElementById("dropdown"),n=document.querySelector(".profile");t&&(l=!l,t.classList.toggle("show",l),n.classList.toggle("active-border",l),e.stopPropagation())}function v(e){return y.apply(this,arguments)}function y(){return(y=u(c().mark((function e(t){var n,r,o,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f(),n=document.getElementById("email").value,r=document.getElementById("password").value,o=document.getElementById("profile").getAttribute("data-csrf"),e.prev=5,e.next=8,fetch("/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":o},body:JSON.stringify({email:n,password:r})});case 8:if(!(a=e.sent).ok){e.next=16;break}return e.next=12,a.json();case 12:"client"===(i=e.sent).role?window.location.href="/":i.superadmin?window.location.href="/admin/superadmin-dashboard":window.location.href="/admin/staff-dashboard",e.next=21;break;case 16:return e.next=18,a.json();case 18:h(e.sent.error||"Login failed. Please check your email and password.","error");case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(5),console.error("Error during login:",e.t0),h("An error occurred. Please try again later.","error");case 27:return e.prev=27,m(),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[5,23,27,30]])})))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",(function(){f(),window.addEventListener("load",m)})),document.addEventListener("DOMContentLoaded",(function(){var e,t={"/admin/superadmin-dashboard":"superAdminDashboardLink","/admin/staff-dashboard":"dashboardLink","/admin/create-staff":"createStaffLink","/admin/manage-access":"manageAccessLink","/admin/content-workshop":"contentWorkshopLink"},n=t[window.location.pathname];n&&(null===(e=document.getElementById(n))||void 0===e||e.classList.add("active")),Object.values(t).forEach((function(e){var t=document.getElementById(e);null==t||t.addEventListener("click",(function(){document.querySelectorAll(".staff-header-content a").forEach((function(e){return e.classList.remove("active")})),t.classList.add("active")}))}));var r=document.getElementById("profile"),o=document.getElementById("profile-picture"),a=document.querySelector(".sign-in-button");r&&!o&&a?a.addEventListener("click",(function(e){d||p(e)})):o&&o.addEventListener("click",p),document.addEventListener("click",(function(e){var t=document.getElementById("dropdown"),n=document.getElementById("register-form");!t||!r||r.contains(e.target)||t.contains(e.target)||n&&!n.classList.contains("hidden")||function(){var e=document.getElementById("dropdown"),t=document.querySelector(".profile");e&&(e.classList.remove("show"),l=!1),null==t||t.classList.remove("active-border")}()}))})),document.querySelectorAll("form").forEach((function(e){e.addEventListener("submit",(function(){f()}))})),null===(t=document.getElementById("dropdown"))||void 0===t||t.addEventListener("click",(function(e){e.stopPropagation()}));var g=document.getElementById("login-form"),b=document.getElementById("login-button");function E(){return(E=u(c().mark((function e(){var t,n,r,o,a,i,s,u,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(),t=document.getElementById("first_name").value,n=document.getElementById("last_name").value,r=document.getElementById("register_email").value,o=document.getElementById("register_password").value,a=document.getElementById("confirm_password").value,i=document.getElementById("profile").getAttribute("data-csrf"),t&&!(t.length<2)){e.next=11;break}return h("First name must contain at least 2 letters.","error"),m(),e.abrupt("return");case 11:if(n&&!(n.length<2)){e.next=15;break}return h("Last name must contain at least 2 letters.","error"),m(),e.abrupt("return");case 15:if(s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,r&&s.test(r)){e.next=20;break}return h("Please enter a valid email address.","error"),m(),e.abrupt("return");case 20:if(!(o.length<8)&&/[A-Z]/.test(o)&&/\d/.test(o)){e.next=24;break}return h("Password must be at least 8 characters long and contain one uppercase letter and one number.","error"),m(),e.abrupt("return");case 24:if(o===a){e.next=28;break}return h("Passwords do not match. Please try again.","error"),m(),e.abrupt("return");case 28:return e.prev=28,e.next=31,fetch("/customer-register",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":i},body:JSON.stringify({first_name:t,last_name:n,personal_email:r,password:o})});case 31:return u=e.sent,e.next=34,u.json();case 34:if(l=e.sent,!u.ok){e.next=43;break}return h(l.message,"success"),e.next=39,fetch("/login",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":i},body:JSON.stringify({email:r,password:o})});case 39:e.sent.ok?(h("Account created and logged in successfully!","success"),setTimeout((function(){window.location.href="/"}),3e3)):h("Account created, but login failed. Please log in manually.","error"),e.next=44;break;case 43:h(l.error||"Unexpected error during registration.","error");case 44:e.next=50;break;case 46:e.prev=46,e.t0=e.catch(28),console.error("Error during registration:",e.t0),h("An error occurred. Please try again later.","error");case 50:return e.prev=50,m(),e.finish(50);case 53:case"end":return e.stop()}}),e,null,[[28,46,50,53]])})))).apply(this,arguments)}function w(){return(w=u(c().mark((function e(t){var n,r,o,a,i,s,u,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f(),n=document.getElementById("first_name").value,r=document.getElementById("last_name").value,o=document.getElementById("personal_email").value,a=document.getElementById("email").value,i=document.getElementById("password").value,s=document.getElementById("role").value,u=document.querySelector('input[name="_csrf"]').value,e.prev=9,e.next=12,fetch("/admin/create-staff",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":u},body:JSON.stringify({first_name:n,last_name:r,personal_email:o,email:a,password:i,role:s})});case 12:if(!(d=e.sent).ok||null===(l=d.headers.get("content-type"))||void 0===l||!l.includes("application/json")){e.next=21;break}return e.next=16,d.json();case 16:h(e.sent.message,"success"),document.getElementById("createStaffForm").reset(),e.next=25;break;case 21:return e.next=23,d.json();case 23:h(e.sent.error||"Unexpected server response.","error");case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(9),console.error("Error during staff creation:",e.t0),h("An error occurred. Please try again later.","error");case 31:return e.prev=31,m(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[9,27,31,34]])})))).apply(this,arguments)}g&&g.addEventListener("submit",(function(e){e.preventDefault(),v(e)})),b&&b.addEventListener("click",(function(e){e.preventDefault(),v(e)})),null===(n=document.getElementById("createStaffForm"))||void 0===n||n.addEventListener("submit",(function(e){return w.apply(this,arguments)})),null===(r=document.getElementById("login-button"))||void 0===r||r.addEventListener("click",(function(e){e.preventDefault(),v()})),null===(o=document.getElementById("register-button"))||void 0===o||o.addEventListener("click",(function(e){e.preventDefault(),function(){E.apply(this,arguments)}()})),null===(a=document.getElementById("show-register"))||void 0===a||a.addEventListener("click",(function(e){var t,n,r;e.preventDefault(),t=document.getElementById("dropdown"),n=document.querySelector(".hamburger-menu-icon"),r=document.querySelector(".sign-in-button"),d=!0,t&&(t.classList.add("show"),document.getElementById("login-form").classList.add("hidden"),document.getElementById("register-form").classList.remove("hidden"),t.classList.add("register-mode"),document.getElementById("overlay").classList.remove("hidden"),null==r||r.classList.add("disabled"),document.querySelector(".profile").classList.add("active-border"),n&&n.classList.add("active"))})),null===(i=document.getElementById("show-login"))||void 0===i||i.addEventListener("click",(function(e){var t,n,r;e.preventDefault(),t=document.getElementById("dropdown"),n=document.querySelector(".hamburger-menu-icon"),r=document.querySelector(".sign-in-button"),d=!1,t&&(document.getElementById("register-form").classList.add("hidden"),document.getElementById("login-form").classList.remove("hidden"),t.classList.remove("register-mode"),document.getElementById("overlay").classList.add("hidden"),null==r||r.classList.remove("disabled"),setTimeout((function(){t.classList.add("show"),document.querySelector(".profile").classList.add("active-border"),n&&n.classList.add("active")}),10))})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll('input[type="checkbox"]'),t=document.getElementById("saveChangesButton");function n(){var n=Array.from(e).some((function(e){return e.checked.toString()!==e.getAttribute("data-original")}));t.disabled=!n,console.clear(),console.log("=== Checkbox States ==="),e.forEach((function(e,t){console.log("Checkbox ".concat(t+1,": Checked=").concat(e.checked,", Original=").concat(e.getAttribute("data-original")))})),console.log("Save Button Status:",t.disabled?"Disabled":"Enabled")}e.forEach((function(e){e.addEventListener("change",n)}));var r=new MutationObserver((function(e){e.forEach((function(e){"attributes"===e.type&&"checked"===e.attributeName&&(console.log("Mutation detected on checkbox:",e.target),n())}))}));e.forEach((function(e){r.observe(e,{attributes:!0})})),n()}))})();